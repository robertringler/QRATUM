# =============================================================================
# Goodyear Quantum Tire Visualization Suite - Secrets Configuration
# =============================================================================
# ⚠️  WARNING: This is an EXAMPLE file with PLACEHOLDER values
# ⚠️  DO NOT commit real secrets to version control
# ⚠️  Use a secrets management solution in production:
#     - HashiCorp Vault
#     - AWS Secrets Manager
#     - GCP Secret Manager
#     - Azure Key Vault
#     - Sealed Secrets (Bitnami)
#     - External Secrets Operator
# =============================================================================
#
# HOW TO USE THIS FILE:
# 1. Copy this file: cp secrets.yaml.example secrets.yaml
# 2. Replace placeholder values with real secrets
# 3. Apply to cluster: kubectl apply -f secrets.yaml
# 4. Delete the local file: rm secrets.yaml
# 5. Never commit secrets.yaml to git
#
# =============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: goodyear-api-keys
  namespace: goodyear
  labels:
    app: goodyear-dashboard
    component: secrets
    version: v1
    # Compliance labels
    compliance.quasim.io/do178c: "level-a"
    compliance.quasim.io/data-classification: "secret"
  annotations:
    description: "API keys for Goodyear Quantum Tire Dashboard"
    # Reloader annotation - automatically restart pods when secret changes
    reloader.stakater.com/match: "true"
    # Rotation reminder
    rotate-by: "2026-01-01"
# Type: Opaque for arbitrary key-value pairs
type: Opaque
# StringData: Values will be base64 encoded automatically
# Use 'data' field if providing pre-encoded values
stringData:
  # ==========================================================================
  # Claude Opus API Key
  # ==========================================================================
  # Obtain from: https://console.anthropic.com/
  # Format: sk-ant-api03-xxxxx...
  CLAUDE_OPUS_API_KEY: "YOUR_CLAUDE_OPUS_API_KEY_HERE"
  
  # ==========================================================================
  # QuASIM API Key
  # ==========================================================================
  # Obtain from: QuASIM platform administrator
  # Format: qsm_xxxxx...
  QUASIM_API_KEY: "YOUR_QUASIM_API_KEY_HERE"

---
# =============================================================================
# Alternative: Using pre-encoded base64 values
# =============================================================================
# If you prefer to provide base64-encoded values directly, use this format:
#
# apiVersion: v1
# kind: Secret
# metadata:
#   name: goodyear-api-keys
#   namespace: goodyear
# type: Opaque
# data:
#   # echo -n "your-api-key" | base64
#   CLAUDE_OPUS_API_KEY: WU9VUl9DTEFVREV_T1BVU19BUElfS0VZX0hFUkU=
#   QUASIM_API_KEY: WU9VUl9RVUFTSU1fQVBJX0tFWV9IRVJF

---
# =============================================================================
# Docker Registry Credentials (if using private registry)
# =============================================================================
# Create with: kubectl create secret docker-registry dockerhub-credentials \
#   --docker-server=https://index.docker.io/v1/ \
#   --docker-username=YOUR_USERNAME \
#   --docker-password=YOUR_PASSWORD \
#   --docker-email=YOUR_EMAIL \
#   -n goodyear
# =============================================================================

# apiVersion: v1
# kind: Secret
# metadata:
#   name: dockerhub-credentials
#   namespace: goodyear
#   labels:
#     app: goodyear-dashboard
#     component: registry
# type: kubernetes.io/dockerconfigjson
# stringData:
#   .dockerconfigjson: |
#     {
#       "auths": {
#         "https://index.docker.io/v1/": {
#           "username": "YOUR_DOCKERHUB_USERNAME",
#           "password": "YOUR_DOCKERHUB_PASSWORD",
#           "email": "your-email@example.com",
#           "auth": "BASE64_ENCODED_USERNAME:PASSWORD"
#         }
#       }
#     }

---
# =============================================================================
# TLS Certificate Secret (for HTTPS)
# =============================================================================
# Create with: kubectl create secret tls goodyear-dashboard-tls \
#   --cert=path/to/tls.crt \
#   --key=path/to/tls.key \
#   -n goodyear
# Or use cert-manager for automatic certificate management
# =============================================================================

# apiVersion: v1
# kind: Secret
# metadata:
#   name: goodyear-dashboard-tls
#   namespace: goodyear
#   labels:
#     app: goodyear-dashboard
#     component: tls
# type: kubernetes.io/tls
# stringData:
#   tls.crt: |
#     -----BEGIN CERTIFICATE-----
#     YOUR_TLS_CERTIFICATE_HERE
#     -----END CERTIFICATE-----
#   tls.key: |
#     -----BEGIN PRIVATE KEY-----
#     YOUR_TLS_PRIVATE_KEY_HERE
#     -----END PRIVATE KEY-----

---
# =============================================================================
# RECOMMENDED: Using External Secrets Operator
# =============================================================================
# External Secrets Operator syncs secrets from external providers
# Install: https://external-secrets.io/
# =============================================================================

# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: goodyear-api-keys
#   namespace: goodyear
#   labels:
#     app: goodyear-dashboard
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secrets-manager  # or vault, gcp-secrets-manager, etc.
#     kind: ClusterSecretStore
#   target:
#     name: goodyear-api-keys
#     creationPolicy: Owner
#   data:
#     - secretKey: CLAUDE_OPUS_API_KEY
#       remoteRef:
#         key: goodyear/dashboard/api-keys
#         property: claude_opus_api_key
#     - secretKey: QUASIM_API_KEY
#       remoteRef:
#         key: goodyear/dashboard/api-keys
#         property: quasim_api_key

---
# =============================================================================
# RECOMMENDED: Using Sealed Secrets (Bitnami)
# =============================================================================
# Sealed Secrets encrypts secrets so they can be safely stored in git
# Install: https://sealed-secrets.netlify.app/
# 
# Generate sealed secret:
# kubeseal --format=yaml < secrets.yaml > sealed-secrets.yaml
# =============================================================================

# apiVersion: bitnami.com/v1alpha1
# kind: SealedSecret
# metadata:
#   name: goodyear-api-keys
#   namespace: goodyear
# spec:
#   encryptedData:
#     CLAUDE_OPUS_API_KEY: AgBy8hCJ...encrypted...data==
#     QUASIM_API_KEY: AgBy8hCJ...encrypted...data==
#   template:
#     metadata:
#       name: goodyear-api-keys
#       namespace: goodyear
#       labels:
#         app: goodyear-dashboard
#     type: Opaque

---
# =============================================================================
# Namespace (create if not exists)
# =============================================================================
# Apply first: kubectl apply -f namespace.yaml
# =============================================================================

apiVersion: v1
kind: Namespace
metadata:
  name: goodyear
  labels:
    app: goodyear-dashboard
    # Enable Istio sidecar injection (if using service mesh)
    istio-injection: enabled
    # Pod security standards
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted
  annotations:
    description: "Goodyear Quantum Tire Visualization Suite namespace"

---
# =============================================================================
# ResourceQuota - Limit namespace resource usage
# =============================================================================

apiVersion: v1
kind: ResourceQuota
metadata:
  name: goodyear-resource-quota
  namespace: goodyear
  labels:
    app: goodyear-dashboard
spec:
  hard:
    # CPU limits
    requests.cpu: "10"
    limits.cpu: "20"
    # Memory limits
    requests.memory: "20Gi"
    limits.memory: "40Gi"
    # GPU limits
    requests.nvidia.com/gpu: "4"
    limits.nvidia.com/gpu: "4"
    # Storage limits
    requests.storage: "1Ti"
    persistentvolumeclaims: "10"
    # Pod limits
    pods: "20"
    # Service limits
    services: "10"
    services.loadbalancers: "2"
    # Secret and ConfigMap limits
    secrets: "20"
    configmaps: "20"
